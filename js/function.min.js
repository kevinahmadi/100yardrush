$(document).ready(function(){$(".dash-wrapper").hundredYardDash()}),$.fn.extend({hundredYardDash:function(e){var t={settings:"",link:"",shuffles:0,teamsDefault:12,teamsPool:32,rangeDefault:"1,10,2,7,Normal",defaultImg:"/images/sprites/player.png",totalDashWidth:100,fadeTransition:300,place:1,finalPlaceOrder:[],replayRecord:[],replayMode:!1,dashing:!1,dashOver:!1,codeDash:!1,imgOn:!1,luckOn:!1,aboutOpen:!1,savedSettings:!1,animatedSprites:!0,animatedSet:!1,code:[],turn:[],animationUp:[],characters:[],oldP:[],startingDate:""},e=$.extend(t,e);return this.each(function(e){var a=function(){$(".mi-help-toggle").on("click",function(){t.aboutOpen?(t.aboutOpen=!1,$(".mi-help-toggle").text("help"),$(".settings-about").stop(!0,!1).fadeOut(t.fadeTransition)):(t.aboutOpen=!0,$(".mi-help-toggle").text("highlight_off"),$(".settings-about").stop(!0,!1).fadeIn(t.fadeTransition))})},s=function(){$(".p-hold").html("").animate({opacity:0},200,function(){for(var e=0,a=100/t.settings.teams;e<=t.settings.teams-1;){void 0!==t.settings.player[e]&&null!==t.settings.player[e]||(t.settings.player[e]={name:""});var s='<div class="p-container" style="height:'+a+'%;"><div class="p-bar-outside"><div class="p-bar player'+e+'" data-player="'+e+'" style="background-image:url(\'/images/sprites/player.png\');"><div class="p-name p-name'+e+'"></div></div></div><div class="p-place-container"><div class="p-place"></div></div></div>';$(".p-hold").append(s),e++}t.settings.player.length>t.settings.teams&&t.settings.player.splice(t.settings.teams)}).animate({opacity:0},100,function(){r(),v(),u()}).animate({opacity:1},t.fadeTransition)},n=function(){var e=[6,8,10,12,14,16,18,20];return-1!=$.inArray(parseInt(t.settings.teams),e)},i=function(e){if(e){var t=[6,8,10,12,14,16,18,20];$.each($(".select-number"),function(e,a){-1===$.inArray(parseInt($(this).text()),t)&&$(this).addClass("hidden")})}else $(".select-number").removeClass("hidden"),$(".teamswitch-option").removeClass("selected"),$(".teamswitch-on").addClass("selected")},r=function(){var e=$(".p-bar").css("height"),a=$(".field-start").css("width");parseInt(e)>parseInt(a)&&(e=a),$(function(){if($(".p-bar").css({width:e,height:e,top:"50%",transform:"translateY(-50%)"}),!t.dashing){var a=$(".field-start").width(),s=$(".p-container").width(),n=$(".p-bar").width(),i=a/s*(n/a)*100;t.dashOver||$(".p-bar").css("left",-i+"%")}})},c=function(){$.each(t.settings.player,function(e,t){$(".team"+(e+1)).val(t.name)})},o=function(){$.each($(".input-team"),function(e,a){$(this).on("change",function(){var a=$(this).val();$(".p-name"+e).text(a),t.settings.player[e].name=a,O()})})},l=function(){$.each($(".input-code"),function(e,a){$(this).on("change",function(){var a=$(this).val(),a=a.replace(/\s/g,""),a=a.substring(0,20);t.settings.player[e].code=a})})},d=function(){$.each($(".input-img"),function(e,a){$(this).on("change",function(){var a=$(this).val();a=a.replace(/^https?\:\/\//i,""),$(this).val(a),t.settings.player[e].img=a,g()})})},p=function(){t.animatedSet||$.each($(".p-bar"),function(e,a){if(t.animatedSprites){for(;t.characters.length<t.settings.teams;){var s=Math.floor(Math.random()*t.teamsPool)+1;t.characters.indexOf(s)>-1||(t.characters[t.characters.length]=s)}var n=Math.floor(2*Math.random())+1;t.settings.player[e].character=t.characters[e]+"-"+n}})},u=function(){t.imgOn?($(".input-img-wrapper").show(),$(".sprite-select-wrapper").hide(),$(".p-bar").css({"background-size":"contain","background-repeat":"no-repeat","background-position":"center center","background-image":'url("/images/sprites/player.png")'})):t.animatedSprites?($(".sprite-select-wrapper").show(),$(".input-img-wrapper").hide(),$(".p-bar").css({"background-size":"600% 200%","background-position":"0 0"}),p()):t.imgOn||t.animatedSprites?$.noop():($(".sprite-select-wrapper").hide(),$(".p-bar").css({"background-size":"contain","background-repeat":"no-repeat","background-position":"center center","background-image":'url("/images/sprites/player.png")'}),$(".input-img-wrapper").hide()),d(),g()},g=function(){var e=[];$.each($(".p-bar"),function(a,s){var n=t.settings.player[a].img;if(t.animatedSprites){var i="/images/sprites/char/"+t.settings.player[a].character+".png";$(".player"+a).addClass("char"+t.settings.player[a].character),$(".player"+a).attr("data-char",t.settings.player[a].character),m(i,a)}else if(t.imgOn||t.animatedSprites)if(""===n||null===n||void 0===n||"undefined"===n){var i=t.defaultImg;m(i,a)}else if(f(n))n.startsWith("https://")||n.startsWith("http://")||(n="//"+n),h(n).then(function(t){if(e[a]=t,e[a]){m(n,a)}},function(e){var s=t.defaultImg;m(s,a)});else{var i=t.defaultImg;m(i,a)}else{var i=t.defaultImg;m(i,a)}})},f=function(e){return null!=e.match(/\.(jpeg|jpg|gif|png)$/)},h=function(e,t){return new Promise(function(a,s){var n,i=t||5e3,r=new Image;r.onerror=r.onabort=function(){clearTimeout(n),s(!1)},r.onload=function(){clearTimeout(n),a(!0)},n=setTimeout(function(){r.src="//!!!!/test.jpg",s(!1)},i),r.src=e})},m=function(e,a){$(".player"+a).css({"background-image":"url('"+e+"')"}),$(".playerimg"+a).val(t.settings.player[a].img)},v=function(){$.each(t.settings.player,function(e,a){$(".p-name"+e).text(t.settings.player[e].name)})},k=function(e){function a(){$(".settings-next").on("click",function(){$(".settings-next").off("click"),$(".settings-back").off("click"),$(".settings-"+s).fadeOut(t.fadeTransition,function(){s++,$(".settings-"+s).fadeIn(t.fadeTransition,function(){a()})})}),$(".settings-back").on("click",function(){$(".settings-next").off("click"),$(".settings-back").off("click"),$(".settings-"+s).fadeOut(t.fadeTransition,function(){s--,$(".settings-"+s).fadeIn(t.fadeTransition,function(){a()})})}),$(".settings-code-fill").on("click",function(){T(),z()}),$(".settings-compile").on("click",function(){b(),y("recap-save","button-save-wrapper")}),$(".settings-count-luck").on("click",function(){N()})}var s=e;a()},b=function(){var e='<div class="recap-wrapper"><div class="recap-column recap-teams-box"><div class="recap-title">Teams</div>',a="";$.each(t.settings.player,function(s,n){if(t.animatedSprites){var i="/images/sprites/char/"+t.settings.player[s].character+".png";a="background-size:600% 200%;background-position:0 0"}else if(t.imgOn){var i=t.settings.player[s].img;i="undefined"==i||void 0==i||""==i?"/images/sprites/player.png":i.startsWith("https://")||i.startsWith("http://")?"/images/sprites/player.png":"//"+i}else var i="/images/sprites/player.png";if(""==t.settings.player[s].name)var r="&nbsp;";else var r=t.settings.player[s].name;e+='<div class="recap-row"><div class="recap-img" style="background-image:url(\''+i+"');"+a+'"></div><div class="recap-name">'+r+"</div></div>"}),e+='</div><div class="recap-column recap-luck-box"><div class="recap-blocked blocked-luck"><div class="blocked-title">Luck Not Activated</div></div><div class="recap-title">Luck</div>',$.each(t.settings.player,function(a,s){if(t.luckOn){var n=t.settings.player[a].luck;n=0===parseInt(n)||""===n?"&nbsp":"+"+t.settings.player[a].luck}else var n="&nbsp;";e+='<div class="recap-row"><div class="recap-luck"><ul class="recap-luck-amount"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><div class="recap-luck-number">'+n+"</div></div></div>"}),e+='</div><div class="recap-column recap-code-box"><div class="recap-blocked blocked-codedash"><div class="blocked-title">Code Rush is Not Set</div></div><div class="recap-title">Codes</div>',$.each(t.settings.player,function(a,s){if(t.codeDash){if(""==t.settings.player[a].code);else{t.settings.player[a].code}e+='<div class="recap-row"><div class="recap-code">'+t.settings.player[a].code+"</div></div>"}else e+='<div class="recap-row"><div class="recap-code"><br /></div></div>'}),e+='</div></div><div class="recap-wrapper"><div class="recap-column"><div class="recap-title">Settings</div><div class="recap-range recap-first-range"><div class="recap-blocked blocked-settings"><div class="blocked-title">Not Used in Code Rush</div></div><div class="recap-column"><div class="recap-range-title">Min Yards</div><div class="recap-range-value">'+t.settings.range.minY+'</div></div><div class="recap-column"><div class="recap-range-title">Max Yards</div><div class="recap-range-value">'+t.settings.range.maxY+'</div></div><div class="recap-column"><div class="recap-range-title">Min Seconds</div><div class="recap-range-value">'+t.settings.range.minS+'</div></div><div class="recap-column"><div class="recap-range-title">Max Seconds</div><div class="recap-range-value">'+t.settings.range.maxS+'</div></div></div><div class="recap-range"><div class="recap-column"><div class="recap-range-title">Speed</div><div class="recap-range-value">'+t.settings.range.speed+'</div></div></div></div></div><div class="recap-wrapper"><div class="recap-column"><div class="recap-row recap-save"></div></div></div>',$(".settings-recap").html("").append(e),t.luckOn?$.each($(".recap-luck-amount"),function(e,a){$(this).find("li:nth-child("+(parseInt(t.settings.player[e].luck)+1)+")").css({"background-color":"#3498db"}).prevAll().css({"background-color":"#3498db"})}):($(".recap-luck-box").addClass("recap-grey"),$(".blocked-luck").show()),t.codeDash?($(".recap-first-range").addClass("recap-grey"),$(".blocked-settings").show()):($(".recap-code-box").addClass("recap-grey"),$(".blocked-codedash").show())},y=function(e,a){if(t.replayRecord.length>=1)var s="Save and Share Replay";else if(t.savedSettings)var s="Save Changes";else var s="Save Settings";var n='<div class="'+a+'"><button><i class="material-icons">save</i>'+s+'</button><input type="text" /></div>';$("."+e).append(n),$("."+a+" button").one("click",function(){$(this).text("Saving").css({"background-color":"#3498db"});var e,s=[],n=[],i=[],r=[],c=[],o=[],l=[];$.each(t.settings.player,function(e,t){s.push(encodeURIComponent(t.name))}),t.imgOn&&$.each(t.settings.player,function(e,t){"undefined"===t.img||void 0===t.img?(t.img="",n.push(t.img)):n.push(encodeURIComponent(t.img))}),$.each(t.settings.player,function(e,t){i.push(t.character)}),i=i.join(","),r=t.animatedSprites+":"+i,t.codeDash&&$.each(t.settings.player,function(e,t){c.push(encodeURIComponent(t.code))}),t.luckOn&&$.each(t.settings.player,function(e,t){o.push(t.luck)}),e=$.now(),$.each(t.replayRecord,function(e,t){l[e]=t.place+":"+t.yards+":"+t.time}),l=l.join("-");var d=$.ajax({url:"/process/p-savesettings.php",type:"POST",data:{"save-settings":!0,teams:t.settings.teams,names:s.join(","),settings:t.settings.range.minY+","+t.settings.range.maxY+","+t.settings.range.minS+","+t.settings.range.maxS+","+t.settings.range.speed,img:n.join(","),code:c.join(","),animated:r,luck:o.join(""),date:e,replay:l,link:t.link}});d.done(function(e,t,s){$("."+a+" button").html('<i class="material-icons">filter_none</i>Copy').on("click",function(e){var t=document.querySelector("."+a+" input");t.focus(),t.select();var s=(document.execCommand("copy"),$(this));s.find("i").text("done"),t1=setTimeout(function(){s.find("i").text("filter_none")},4e3)});var n=window.location.href.split("/v/")[0];"/"==n.substring(n.length-1)&&(n=n.substring(0,n.length-1)),$("."+a+" input").val(n+"/v/"+e).css({display:"inline",padding:"8px"}).animate({width:"300px"}).on("click",function(){$(this).select()})}),d.fail(function(e,t,a){console.error("The following error occurred: "+t,a)})})},x=function(){t.codeDash?($(".range-toggle").addClass("unavailable"),$(".range-toggle").find(".range-num").addClass("unavailable")):($(".range-toggle").removeClass("unavailable"),$(".range-toggle").find(".range-num").removeClass("unavailable"))},C=function(){$(".teamsinput-container").html("");for(var e=1;e<=t.settings.teams;){var a='<div class="input-container"><input class="input-team team'+e+'" placeholder="'+e+'" /><div class="input-img-wrapper"><i class="material-icons mi-rarr">subdirectory_arrow_right</i><input class="input-img playerimg'+(e-1)+'" placeholder="direct img link" /></div><div class="sprite-select-wrapper"><i class="material-icons mi-rarr">subdirectory_arrow_right</i><button class="change-sprite" tabindex="-1" data-player="'+(e-1)+'">Change Sprite Colors</button></div></div>';$(".teamsinput-container").append(a),e++}o();var s=$(".sprite-box-wrapper").html();$(".sprite-box-wrapper").html("").html(s),w()},w=function(){var e,a;$(".change-sprite").on("click",function(){$(".sprite-box-wrapper").show();var s=$(".sprite-select-box").height();$(".sprite-box-wrapper").hide(),e=$(this).data("player"),a=t.settings.player[e].character.split("-"),$(".sprite-char").removeClass("selected"),$(".sprite-select-box").find('[data-char="'+a[0]+'"]').addClass("selected"),$(".sprite-skin-color").removeClass("checked"),$(".sprite-skin").find('[data-skin="'+a[1]+'"]').addClass("checked"),$(".sprite-current").css({"background-image":'url("/images/sprites/char/'+a[0]+"-"+a[1]+'.png")'});var n=$(this).offset().top+$(this).height()+5+"px",i=$(window).height()/2;parseInt(n)>i&&(n=$(this).offset().top-$(this).height()-s+"px"),$(".sprite-select-box").css({top:n}),$(".sprite-box-wrapper").fadeIn(t.fadeTransition,function(){$(document).on("click",".sprite-box-wrapper",I)})}),$(".sprite-char").on("click",function(){void 0===a&&(a=[]),a[0]=$(this).data("char"),t.settings.player[e].character=a[0]+"-"+a[1],$(".sprite-char").removeClass("selected"),$(".sprite-select-box").find('[data-char="'+a[0]+'"]').addClass("selected"),$(".sprite-current").css({"background-image":'url("/images/sprites/char/'+t.settings.player[e].character+'.png")'}),g()}),$(".sprite-skin-color").on("click",function(){a[1]=$(this).data("skin"),t.settings.player[e].character=a[0]+"-"+a[1],$(".sprite-skin-color").removeClass("checked"),$(".sprite-skin").find('[data-skin="'+a[1]+'"]').addClass("checked"),$(".sprite-current").css({"background-image":'url("/images/sprites/char/'+t.settings.player[e].character+'.png")'}),g()})},I=function(){$(event.target).closest(".sprite-select-box").length||$(".sprite-box-wrapper").is(":visible")&&$(".sprite-box-wrapper").fadeOut(t.fadeTransition,function(){$(document).off("click",I)})},S=function(){$(".code-container").html("");for(var e=1;e<=t.settings.teams;){var a='<div class="code-line"><div class="code-player-name c-name'+(e-1)+'"></div><input type="text" class="input-code code'+(e-1)+'" /></div>';$(".code-container").append(a),e++,O(),l()}},O=function(){$.each(t.settings.player,function(e,t){$(".c-name"+e).text(t.name),$(".code"+e).val(t.code)})},T=function(){t.codeDash&&$.each($(".input-code"),function(e,a){if(""===$(this).val()){var s=D(15);$(this).val(s),t.settings.player[e].code=s}}),O()},D=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=0;s<e;s++)t+=a.charAt(Math.floor(Math.random()*a.length));return t},M=function(){t.shuffles++,$(".total-shuffles").text(t.shuffles);for(var e,a,s=t.settings.player,n=s.length;0!==n;)a=Math.floor(Math.random()*n),n-=1,e=s[n],s[n]=s[a],s[a]=e;t.settings.player=s,v(),O(),c(),g()},R=function(e){var t=e%10,a=e%100;return 1==t&&11!=a?e+"st":2==t&&12!=a?e+"nd":3==t&&13!=a?e+"rd":e+"th"};String.prototype.hexEncode=function(){var e,t="";for(e=0;e<this.length;e++)t+=this[e].charCodeAt(0);return t};var P=function(e){for(var t="",a=encodeURIComponent(e),s=a.split("").reverse().join(""),n=0;n<s.length;n++)t+=String.fromCharCode(s.charCodeAt(n)+1);return t+=e},Y=function(e){null!==e&&void 0!==e&&""!==e||(e="blank",e=e.toString()),e.length<=4&&(e=e+e+e+e+e);var t=e.hexEncode(),t=t.replace(/\D/g,""),t=t.replace(/[0]/g,""),t=t.match(/.{5}/g),a=[],s=[];return $.each(t,function(e,t){var n=t.substring(0,1),i=t.substring(1);a[e]=n,s[e]=i}),{yards:a,time:s}},W=function(){t.replayMode||y("settings-share","button-replay-wrapper"),$(".settings-box").delay(t.fadeTransition).fadeIn(t.fadeTransition),$(".settings-share").show()},U=function(e){$.each(e,function(e,a){var s="";if(t.animatedSprites){var n="/images/sprites/char/"+t.settings.player[a.orig].character+".png";s="background-size:600% 200%;background-position:0 0"}else if(t.imgOn){var n=t.settings.player[a.orig].img;s="background-size:contain;background-repeat:no-repeat;background-position:center center;",n="undefined"==n||void 0==n||""==n?"/images/sprites/player.png":n.startsWith("https://")||n.startsWith("http://")?"/images/sprites/player.png":"//"+n}else{var n="/images/sprites/player.png";s="background-size:contain;background-repeat:no-repeat;background-position:center center;"}var i='<div class="place-order"><div class="place-photo photo'+e+'" style="background-image:url(\''+n+"');"+s+'"></div><div class="place-number">'+R(a.place)+'</div><div class="place-name">'+a.name+"</div></div>";$(".placements").append(i),t.animatedSprites&&(e<3&&L($(".photo"+e)),e>=3&&B($(".photo"+e)))})},A=function(){$(".luck-container").removeClass("unavailable"),$(".luck-amount").css("cursor","pointer");var e=!1;$(".luck-amount li").on("mousedown",function(t){t.preventDefault(),e=!0,$(this).addClass("luck-on").css({"background-color":"#3498db"}).prevAll("li").addClass("luck-on").css({"background-color":"#3498db"}),$(this).nextAll("li").removeClass("luck-on").css({"background-color":"#fff"});var a="+"+$(this).prevAll().length;0===parseInt(a)&&(a=""),$(this).parent().next(".luck-number").text(a),N()}).on("mousemove",function(t){if(t.preventDefault(),e){$(t.target).addClass("luck-on").css({"background-color":"#3498db"}).prevAll("li").addClass("luck-on").css({"background-color":"#3498db"}),$(t.target).nextAll("li").removeClass("luck-on").css({"background-color":"#fff"});var a="+"+$(t.target).prevAll().length;0===parseInt(a)&&(a=""),$(t.target).parent().next(".luck-number").text(a),N()}}),$(window).on("mouseup",function(t){e=!1}),N()},j=function(){$(".luck-amount li").off("mousedown").off("mousemove"),$(".luck-amount").css("cursor","not-allowed"),$(".luck-container").addClass("unavailable")},z=function(){$(".luck-container").html(""),$.each(t.settings.player,function(e,a){var s="+"+t.settings.player[e].luck;if(0===parseInt(s)||void 0===t.settings.player[e].luck||""===t.settings.player[e].luck)var s="&nbsp;";var n='<div class="luck-row"><div class="luck-name">'+t.settings.player[e].name+'</div><ul class="luck-amount"><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><div class="luck-number">'+s+"</div>";$(".luck-container").append(n)}),F()},F=function(){$.each($(".luck-amount"),function(e,a){if(void 0!==t.settings.player[e].luck)var s=t.settings.player[e].luck;else var s=0;""===s&&(s=0),$(this).find("li:nth-child("+(parseInt(s)+1)+")").addClass("luck-on").css({"background-color":"#3498db"})}),$(".luck-on").prevAll().addClass("luck-on").css({"background-color":"#3498db"}),t.luckOn?($(".luckswitch-option").removeClass("selected"),$(".luckswitch-on").addClass("selected"),A()):j()},N=function(){t.luckOn?$.each($(".luck-amount"),function(e,a){var s=$(this).find(".luck-on").length-1;t.settings.player[e].luck=s}):$.each(t.settings.player,function(e,t){t.luck=""})},_=function(e){var a=e.data("player");null==t.animationUp[a]&&(t.animationUp[a]=!0),0===parseInt(e.css("background-position-x"))?e.css("background-position-x","40%"):20===parseInt(e.css("background-position-x"))?(e.css("background-position-x","40%"),t.animationUp[a]=!0):60===parseInt(e.css("background-position-x"))?(e.css("background-position-x","40%"),t.animationUp[a]=!1):40===parseInt(e.css("background-position-x"))&&t.animationUp[a]?e.css("background-position-x","60%"):e.css("background-position-x","20%")},L=function(e){e.css("background-position-x","80%")},B=function(e){e.css("background-position-x","100%")},E=function(e){t.dashing=!0;var a=parseInt(t.settings.range.minY),s=parseInt(t.settings.range.maxY)+1-parseInt(t.settings.range.minY),n=1e3*parseInt(t.settings.range.minS),i=1e3*(parseInt(t.settings.range.maxS)-parseInt(t.settings.range.minS)),r=t.settings.range.speed;$.each(e,function(e,c){var o=$(this),l=!1,d=o.find(".p-bar").data("player"),p=o.width(),u=o.find(".p-bar").css("left"),u=parseFloat(u);if(currentPercent=u/p*100,t.replayMode){void 0!==t.turn[d]&&null!==t.turn[d]||(t.turn[d]=0);var g=parseInt(t.settings.replay[d].yards[t.turn[d]]),f=parseInt(t.settings.replay[d].time[t.turn[d]]);t.turn[d]++;var h=t.settings.replay[d].yards.length;t.turn[d]>h&&o.find(".p-bar").css({left:"200%"})}else{if(t.codeDash){void 0!==t.turn[d]&&null!==t.turn[d]||(t.turn[d]=0,t.code[d]=t.settings.player[d].code);var m=Y(t.code[d]);void 0!==m.yards[t.turn[d]]&&null!==m.yards[t.turn[d]]||(t.code[d]=P(t.code[d]),t.turn[d]=0);var g=parseInt(m.yards[t.turn[d]]),f=parseInt(m.time[t.turn[d]]);t.turn[d]++}else var g=randomNum=Math.floor(Math.random()*s)+a,f=Math.floor(Math.random()*i)+n;if(t.luckOn&&!t.replayMode){var v=t.settings.player[d].luck;if(v>0){v/=2;var k=Math.floor(20*Math.random())+1;k/=2,k<=v&&(g*=2)}}void 0===t.replayRecord[d]&&(t.replayRecord[d]={yards:"",time:"",place:""}),t.replayRecord[d].yards+=g+",",t.replayRecord[d].time+=f+","}"Fast"===r&&(g*=2),"Faster"===r&&(g*=2,f/=2),"Fastest"===r&&(g*=3,f/=3);var b=currentPercent+g;o.find(".p-bar").animate({left:b+"%"},{duration:f,easing:"swing",progress:function(){cW=o.width(),bW=o.find(".p-bar").css("left"),bW=parseFloat(bW),cP=bW/cW*100,t.animatedSprites&&(null==t.oldP[d]?t.oldP[d]=Math.floor(cP):Math.floor(cP)>t.oldP[d]&&(_(o.find(".p-bar")),t.oldP[d]=Math.floor(cP))),cP>=t.totalDashWidth&&(l=!0,o.find(".p-bar").stop(!1,!0))},complete:function(){l?(o.find(".p-bar").css({left:t.totalDashWidth+"%"}),t.replayMode?t.place=t.settings.replay[d].place:(t.replayRecord[d].place=t.place,t.replayRecord[d].yards=t.replayRecord[d].yards.slice(0,-1),t.replayRecord[d].time=t.replayRecord[d].time.slice(0,-1)),t.finalPlaceOrder[t.place-1]={place:t.place,name:t.settings.player[d].name,orig:d},o.find(".p-place").text(R(t.place)),"1"==t.place?o.find(".p-place").addClass("gold"):"2"==t.place?o.find(".p-place").addClass("silver"):"3"==t.place?o.find(".p-place").addClass("bronze"):o.find(".p-place").addClass("black-outline"),t.animatedSprites&&(parseInt(t.place)<=3?L(o.find(".p-bar")):B(o.find(".p-bar"))),t.finalPlaceOrder.length==t.settings.teams?(t.dashing=!1,t.dashOver=!0,U(t.finalPlaceOrder),W()):t.place++):E(o)}})})};t.settings=function(){if("undefined"!=typeof settingsFromDB){var e=settingsFromDB;t.savedSettings=!0,t.link=e.link}else var e;void 0===e&&(e=[]);var a=e.teams||t.teamsDefault,s=e.settings||t.rangeDefault,s=s.split(","),s={minY:s[0],maxY:s[1],minS:s[2],maxS:s[3],speed:s[4]},n=e.date,i=e.replay||void 0,r=e.names||"",c=e.code||void 0,o=e.animated||void 0,l=e.img||void 0,d=e.luck||void 0,r=r.split(","),p=[],u=[];if($.each(r,function(e,t){p.push({name:decodeURIComponent(t),code:"",img:"",luck:""})}),void 0!==i){t.replayMode=!0;var i=i.split("-");$.each(i,function(e,t){var a=t.split(":"),s=a[1].split(","),n=a[2].split(",");u[e]={place:a[0],yards:s,time:n}});var n=new Date(parseInt(n)),g={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZoneName:"short"},n=n.toLocaleString("en-US",g)}if(void 0!==c){t.codeDash=!0;var c=c.split(",");$.each(c,function(e,t){p[e].code=decodeURIComponent(t)}),x()}if(void 0!==d){t.luckOn=!0;var d=d.split("");$.each(d,function(e,t){p[e].luck=t})}if(void 0!==l){t.imgOn=!0;var l=l.split(",");$.each(l,function(e,t){p[e].img=decodeURIComponent(t)})}if(void 0!==o){t.animatedSet=!0;var f=o.split(":"),h=f[1].split(",");"false"==f[0]&&(t.animatedSprites=!1),$.each(h,function(e,t){p[e].character=t})}else t.imgOn=!1;return{teams:a,player:p,range:s,date:n,replay:u}}(),s(),function(){$(".settings-box").fadeIn(t.fadeTransition,function(){if(t.replayMode){$(".settings-start").fadeIn(t.fadeTransition),$(".settings-navigate").hide(),$(".share-container").hide(),$(".wrapper-top").css("height","5%"),$(".wrapper-bottom").css("height","95%");var e='<p class="replay-title">Replay from '+t.settings.date+"</p>";$(".wrapper-top").append(e),$(".button-start").text("Watch Rush Replay"),b()}else t.codeDash&&(x(),$(".settings-shuffler").fadeOut(t.fadeTransition,function(){$(".settings-code").fadeIn(t.fadeTransition)}),$(".shufflercode-option").removeClass("selected"),$(".shufflercode-code").addClass("selected")),t.savedSettings?($(".settings-6").fadeIn(t.fadeTransition),b(),k(6),z()):$(".settings-1").fadeIn(t.fadeTransition)})}(),function(){var e=$(".select-number"),s=$(".yards-min"),r=$(".yards-max"),o=$(".seconds-min"),l=$(".seconds-max"),p=$(".range-speed");e.removeClass("selected"),s.removeClass("selected"),r.removeClass("selected"),o.removeClass("selected"),l.removeClass("selected"),p.removeClass("selected"),$.each(e,function(){$(this).text()==t.settings.teams&&$(this).addClass("selected")}),$.each(s,function(){$(this).text()==t.settings.range.minY&&$(this).addClass("selected")}),$.each(r,function(){$(this).text()==t.settings.range.maxY&&$(this).addClass("selected")}),$.each(o,function(){$(this).text()==t.settings.range.minS&&$(this).addClass("selected")}),$.each(l,function(){$(this).text()==t.settings.range.maxS&&$(this).addClass("selected")}),$.each(p,function(){$(this).text()==t.settings.range.speed&&$(this).addClass("selected")}),C(),c(),S(),d(),a(),n()||i(!1)}(),function(){$(".select-number").on("click",function(){$(".select-number").removeClass("selected"),$(this).addClass("selected"),t.settings.teams=$(this).text(),s(),C(),S(),O(),c()}),$(".yards-min").on("click",function(){$(".yards-min").removeClass("selected"),$(this).addClass("selected"),t.settings.range.minY=$(this).text()}),$(".yards-max").on("click",function(){$(".yards-max").removeClass("selected"),$(this).addClass("selected"),t.settings.range.maxY=$(this).text()}),$(".seconds-min").on("click",function(){$(".seconds-min").removeClass("selected"),$(this).addClass("selected"),t.settings.range.minS=$(this).text()}),$(".seconds-max").on("click",function(){$(".seconds-max").removeClass("selected"),$(this).addClass("selected"),t.settings.range.maxS=$(this).text()}),$(".range-speed").on("click",function(){$(".range-speed").removeClass("selected"),$(this).addClass("selected"),t.settings.range.speed=$(this).text()}),$(".button-random").on("click",function(){M()}),$(".shufflercode-option").on("click",function(){$(".shufflercode-option").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("shufflercode-code")?(t.codeDash=!0,x(),$(".settings-shuffler").fadeOut(t.fadeTransition,function(){$(".settings-code").fadeIn(t.fadeTransition)})):(t.codeDash=!1,x(),$(".settings-code").fadeOut(t.fadeTransition,function(){$(".settings-shuffler").fadeIn(t.fadeTransition)}))}),$(".spritetype-option").on("click",function(){$(".spritetype-option").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("spritetype-animated")&&(t.animatedSprites=!0,t.imgOn=!1,u()),$(this).hasClass("spritetype-static")&&(t.animatedSprites=!1,t.imgOn=!1,u()),$(this).hasClass("spritetype-custom")&&(t.animatedSprites=!1,t.imgOn=!0,u())}),$(".luckswitch-option").on("click",function(){$(".luckswitch-option").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("luckswitch-on")?(t.luckOn=!0,A()):(t.luckOn=!1,j())}),$(".teamswitch-option").on("click",function(){$(".teamswitch-option").removeClass("selected"),$(this).addClass("selected"),i($(this).hasClass("teamswitch-on")?!1:!0)})}(),k(1),function(){$(".button-start").one("click",function(){$(this).prop("disabled",!0),$(".button-random").prop("disabled",!0),t.codeDash||$.each(t.settings.player,function(e,a){t.settings.player[e].code=""}),$(".settings-start").fadeOut(t.fadeTransition,function(){$(".settings-url").val(""),$(".settings-goodluck").fadeIn(500,function(){$(".settings-goodluck").fadeOut(500),$(".settings-box").fadeOut(500,function(){$(".countdown-box").fadeIn(500,function(){$(".countdown-3").fadeIn(500,function(){$(".countdown-3").fadeOut(500,function(){$(".countdown-2").fadeIn(500,function(){$(".countdown-2").fadeOut(500,function(){$(".countdown-1").fadeIn(500,function(){$(".countdown-1").fadeOut(500,function(){$(".countdown-box").fadeOut(500,function(){E($(".p-container"))})})})})})})})})})})})})}(),function(){$(window).on("resize",function(){r()})}()})}});